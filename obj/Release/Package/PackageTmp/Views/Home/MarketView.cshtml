@{
       
    Layout = "~/Views/Shared/_StrwLayout.cshtml"; 
    ViewBag.Title = "MarketView";
});
<script language= "javascript">
    $(document).ready(function () {
        //$('.grid-wrap').css({ 'height': '100%' });
        //$('.loader').clone().css({ 'display': 'block' }).appendTo('.grid-wrap');
        //Carga de datos por Channel
        var _lastrow, _lastcolor, _lastfontcolor;
        var _path = '/MarketViewChannel/';
        var _loader = '<tr class="removeme"><td colspan="3" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id ="rotate" src="../images/loading_anim.gif"/></td></tr>';
        $('#_DataView tbody').append('<tr class="removeme"><td colspan="4" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id="rotate" src="../images/loading_anim.gif"/></td></tr>');
        $.ajax({
            url: _path + 'GetDataView',
            contentType: 'application/html; charset=utf-8',
            type: 'GET',
            dataType: 'html'
        })
        .success(function (result) {
            $('#_DataView tbody').append(result);
            $('.removeme').remove();
            //$('.brandDataView .loader').hide();
            $('#_MonthView tbody').append(_loader);
            $.ajax({
                url: _path + 'GetMonth',
                contentType: 'application/html; charset=utf-8',
                type: 'GET',
                dataType: 'html'
            })
            .success(function (result) {
                $('#_MonthView tbody').append(result);
                $('.removeme').remove();
                //$('.brandDataView .loader').hide();                
                $('#_YTDView tbody').append(_loader);
                $.ajax({
                    url: _path + 'GetYTD',
                    contentType: 'application/html; charset=utf-8',
                    type: 'GET',
                    dataType: 'html'
                })
                .success(function (result) {
                    $('#_YTDView tbody').append(result);
                    $('.removeme').remove();
                    //$('.brandDataView .loader').hide();                    
                    $('#_MATView tbody').append(_loader);
                    $.ajax({
                        url: _path + 'GetMAT',
                        contentType: 'application/html; charset=utf-8',
                        type: 'GET',
                        dataType: 'html'
                    })
                    .success(function (result) {
                        $('#_MATView tbody').append(result);
                        $('.removeme').remove();
                        //$('.brandDataView .loader').hide();                        
                        $('#_BTGView tbody').append(_loader);
                        $.ajax({
                            url: _path + 'GetBTG',
                            contentType: 'application/html; charset=utf-8',
                            type: 'GET',
                            dataType: 'html'
                        })
                        .success(function (result) {
                            $('#_BTGView tbody').append(result);
                            $('.removeme').remove();
                            //$('.brandDataView .loader').hide();                            
                            $('#_TotalCustomView tbody').append(_loader);
                            $.ajax({
                                url: _path + 'GetTotalCustom',
                                contentType: 'application/html; charset=utf-8',
                                type: 'GET',
                                dataType: 'html'
                            })
                            .success(function (result) {
                                $('.removeme').remove();
                                $('#_TotalCustomView tbody').append(result);
                                //$('.brandDataView .loader').hide();                                
                                $('#_BOYView tbody').append(_loader);
                                $.ajax({
                                    url: _path + 'GetBOY',
                                    contentType: 'application/html; charset=utf-8',
                                    type: 'GET',
                                    dataType: 'html'
                                })
                                .success(function (result) {
                                    $('.removeme').remove();
                                    $('#_BOYView tbody').append(result);
                                    //$('.brandDataView .loader').hide();                                    
                                    $('#_PCVSPYView tbody').append('<tr class="removeme"><td colspan="5" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id ="rotate" src="../images/loading_anim.gif"/></td></tr>');
                                    $.ajax({
                                        url: _path + 'GetPCVSPY',
                                        contentType: 'application/html; charset=utf-8',
                                        type: 'GET',
                                        dataType: 'html'
                                    })
                                    .success(function (result) {
                                        $('.removeme').remove();
                                        $('#_PCVSPYView tbody').append(result);
                                        loadFranchise();
                                        //$('.brandDataView .loader').hide();
                                    })
                                    .error(function (xhr, status) {
                                        alert(status);
                                    });
                                })
                                .error(function (xhr, status) {
                                    alert(status);
                                });
                            })
                            .error(function (xhr, status) {
                                alert(status);
                            });
                        })
                        .error(function (xhr, status) {
                            alert(status);
                        });
                    })
                    .error(function (xhr, status) {
                        alert(status);
                    });
                })
                .error(function (xhr, status) {
                    alert(status);
                });
            })
            .error(function (xhr, status) {
                alert(status);
            });
        })
        .error(function (xhr, status) {
            alert(status);
        });

        //Carga de datos por Franchise
        function loadFranchise() {
            _path = '/MarketViewFranchise/';
            $('#_DataView tbody').append('<tr class="removeme"><td colspan="4" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id ="rotate" src="../images/loading_anim.gif"/></td></tr>');
            $.ajax({
                url: _path + 'GetDataView',
                contentType: 'application/html; charset=utf-8',
                type: 'GET',
                dataType: 'html'
            })
            .success(function (result) {
                $('#_DataView tbody').append(result);
                $('.removeme').remove();
                //$('.brandDataView .loader').hide();
                $('#_MonthView tbody').append(_loader);
                $.ajax({
                    url: _path + 'GetMonth',
                    contentType: 'application/html; charset=utf-8',
                    type: 'GET',
                    dataType: 'html'
                })
                .success(function (result) {
                    $('#_MonthView tbody').append(result);
                    $('.removeme').remove();
                    //$('.brandDataView .loader').hide();                
                    $('#_YTDView tbody').append(_loader);
                    $.ajax({
                        url: _path + 'GetYTD',
                        contentType: 'application/html; charset=utf-8',
                        type: 'GET',
                        dataType: 'html'
                    })
                    .success(function (result) {
                        $('#_YTDView tbody').append(result);
                        $('.removeme').remove();
                        //$('.brandDataView .loader').hide();                    
                        $('#_MATView tbody').append(_loader);
                        $.ajax({
                            url: _path + 'GetMAT',
                            contentType: 'application/html; charset=utf-8',
                            type: 'GET',
                            dataType: 'html'
                        })
                        .success(function (result) {
                            $('#_MATView tbody').append(result);
                            $('.removeme').remove();
                            //$('.brandDataView .loader').hide();                        
                            $('#_BTGView tbody').append(_loader);
                            $.ajax({
                                url: _path + 'GetBTG',
                                contentType: 'application/html; charset=utf-8',
                                type: 'GET',
                                dataType: 'html'
                            })
                            .success(function (result) {
                                $('#_BTGView tbody').append(result);
                                $('.removeme').remove();
                                //$('.brandDataView .loader').hide();                            
                                $('#_TotalCustomView tbody').append(_loader);
                                $.ajax({
                                    url: _path + 'GetTotalCustom',
                                    contentType: 'application/html; charset=utf-8',
                                    type: 'GET',
                                    dataType: 'html'
                                })
                                .success(function (result) {
                                    $('.removeme').remove();
                                    $('#_TotalCustomView tbody').append(result);
                                    //$('.brandDataView .loader').hide();                                
                                    $('#_BOYView tbody').append(_loader);
                                    $.ajax({
                                        url: _path + 'GetBOY',
                                        contentType: 'application/html; charset=utf-8',
                                        type: 'GET',
                                        dataType: 'html'
                                    })
                                    .success(function (result) {
                                        $('.removeme').remove();
                                        $('#_BOYView tbody').append(result);
                                        //$('.brandDataView .loader').hide();                                    
                                        $('#_PCVSPYView tbody').append('<tr class="removeme"><td colspan="5" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id="rotate" src="../images/loading_anim.gif"/></td></tr>');
                                        $.ajax({
                                            url: _path + 'GetPCVSPY',
                                            contentType: 'application/html; charset=utf-8',
                                            type: 'GET',
                                            dataType: 'html'
                                        })
                                        .success(function (result) {
                                            $('.removeme').remove();
                                            $('#_PCVSPYView tbody').append(result);
                                            //$('.brandDataView .loader').hide();
                                            loadKeybrands();
                                        })
                                        .error(function (xhr, status) {
                                            alert(status);
                                        });
                                    })
                                    .error(function (xhr, status) {
                                        alert(status);
                                    });
                                })
                                .error(function (xhr, status) {
                                    alert(status);
                                });
                            })
                            .error(function (xhr, status) {
                                alert(status);
                            });
                        })
                        .error(function (xhr, status) {
                            alert(status);
                        });
                    })
                    .error(function (xhr, status) {
                        alert(status);
                    });
                })
                .error(function (xhr, status) {
                    alert(status);
                });
            })
            .error(function (xhr, status) {
                alert(status);
            });
        }

        //Carga de datos por Keybrands
        function loadKeybrands() {
            _path = '/MarketViewKeybrands/';
            $('#_DataView tbody').append('<tr class="removeme"><td colspan="4" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id ="rotate" src="../images/loading_anim.gif"/></td></tr>');
            $.ajax({
                url: _path + 'GetDataView',
                contentType: 'application/html; charset=utf-8',
                type: 'GET',
                dataType: 'html'
            })
            .success(function (result) {
                $('#_DataView tbody').append(result);
                $('.removeme').remove();
                //$('.brandDataView .loader').hide();
                $('#_MonthView tbody').append(_loader);
                $.ajax({
                    url: _path + 'GetMonth',
                    contentType: 'application/html; charset=utf-8',
                    type: 'GET',
                    dataType: 'html'
                })
                .success(function (result) {
                    $('#_MonthView tbody').append(result);
                    $('.removeme').remove();
                    //$('.brandDataView .loader').hide();                
                    $('#_YTDView tbody').append(_loader);
                    $.ajax({
                        url: _path + 'GetYTD',
                        contentType: 'application/html; charset=utf-8',
                        type: 'GET',
                        dataType: 'html'
                    })
                    .success(function (result) {
                        $('#_YTDView tbody').append(result);
                        $('.removeme').remove();
                        //$('.brandDataView .loader').hide();                    
                        $('#_MATView tbody').append(_loader);
                        $.ajax({
                            url: _path + 'GetMAT',
                            contentType: 'application/html; charset=utf-8',
                            type: 'GET',
                            dataType: 'html'
                        })
                        .success(function (result) {
                            $('#_MATView tbody').append(result);
                            $('.removeme').remove();
                            //$('.brandDataView .loader').hide();                        
                            $('#_BTGView tbody').append(_loader);
                            $.ajax({
                                url: _path + 'GetBTG',
                                contentType: 'application/html; charset=utf-8',
                                type: 'GET',
                                dataType: 'html'
                            })
                            .success(function (result) {
                                $('#_BTGView tbody').append(result);
                                $('.removeme').remove();
                                //$('.brandDataView .loader').hide();                            
                                $('#_TotalCustomView tbody').append(_loader);
                                $.ajax({
                                    url: _path + 'GetTotalCustom',
                                    contentType: 'application/html; charset=utf-8',
                                    type: 'GET',
                                    dataType: 'html'
                                })
                                .success(function (result) {
                                    $('.removeme').remove();
                                    $('#_TotalCustomView tbody').append(result);
                                    //$('.brandDataView .loader').hide();                                
                                    $('#_BOYView tbody').append(_loader);
                                    $.ajax({
                                        url: _path + 'GetBOY',
                                        contentType: 'application/html; charset=utf-8',
                                        type: 'GET',
                                        dataType: 'html'
                                    })
                                    .success(function (result) {
                                        $('.removeme').remove();
                                        $('#_BOYView tbody').append(result);
                                        //$('.brandDataView .loader').hide();                                    
                                        $('#_PCVSPYView tbody').append('<tr class="removeme"><td colspan="5" rowspan="5" style="border: 0px; border-image: none; text-align: center; vertical-align: middle; min-height:100px;"><img id="rotate" src="../images/loading_anim.gif"/></td></tr>');
                                        $.ajax({
                                            url: _path + 'GetPCVSPY',
                                            contentType: 'application/html; charset=utf-8',
                                            type: 'GET',
                                            dataType: 'html'
                                        })
                                        .success(function (result) {
                                            $('.removeme').remove();
                                            $('#_PCVSPYView tbody').append(result);
                                            //$('.brandDataView .loader').hide();
                                            postAsyncLoad();
                                        })
                                        .error(function (xhr, status) {
                                            alert(status);
                                        });
                                    })
                                    .error(function (xhr, status) {
                                        alert(status);
                                    });
                                })
                                .error(function (xhr, status) {
                                    alert(status);
                                });
                            })
                            .error(function (xhr, status) {
                                alert(status);
                            });
                        })
                        .error(function (xhr, status) {
                            alert(status);
                        });
                    })
                    .error(function (xhr, status) {
                        alert(status);
                    });
                })
                .error(function (xhr, status) {
                    alert(status);
                });
            })
            .error(function (xhr, status) {
                alert(status);
            });
        }
        function postAsyncLoad() {
            $('tbody .grid-row').click(function () {
                var _row = ($(this).closest('table').attr('id') == '_DataView') ? this.rowIndex + 1 : this.rowIndex;
                if (_lastrow != null) {
                    $($('#_DataView tr')[_lastrow - 1]).css({ 'background-color': _lastcolor, 'color': _lastfontcolor });
                    $('table').each(function () {
                        if ($(this).attr('id') != '_DataView')
                            $($('#' + $(this).attr('id') + ' tr')[_lastrow]).css({ 'background-color': _lastcolor, 'color': _lastfontcolor });
                    });
                }
                _lastcolor = $($('#_DataView tr')[_row - 1]).css('background-color');
                _lastfontcolor = $($('#_DataView tr')[_row - 1]).css('color');
                _lastrow = _row;
                $($('#_DataView tr')[_row - 1]).css('background-color', '#EEE');
                $('table').each(function () {
                    if ($(this).attr('id') != '_DataView')
                        $($('#' + $(this).attr('id') + ' tr')[_row]).css({ 'background-color': '#ddd', 'color': '#000' });
                });
            });
        }
    });
</script>
<table><tr><td style ="vertical-align:top;">
    <div class="grid-wrap">
        <table id="_DataView" class="table table-striped grid-table" style="min-width:590px;">
        @{
            Html.RenderPartial("~/Views/MarketData/_MarketDataView.cshtml");
        }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id="_MonthView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_Month/_Market_Month.cshtml", new StrawmanApp.Models.Market_MonthModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id="_YTDView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_YTD/_Market_YTD.cshtml", new StrawmanApp.Models.Market_YTDModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id="_MATView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_MAT/_Market_MAT.cshtml", new StrawmanApp.Models.Market_MATModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id="_BTGView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_BTG/_Market_BTG.cshtml", new StrawmanApp.Models.Market_BTGModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id="_TotalCustomView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_TotalCustom/_Market_TotalCustom.cshtml", new StrawmanApp.Models.Market_TotalCustomModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:0;vertical-align:top;">
    <div class="grid-wrap">
        <table id ="_BOYView" class="table table-striped grid-table" style="min-width:300px;">
        @{            
            Html.RenderPartial("~/Views/Market_BOY/_Market_BOY.cshtml", new StrawmanApp.Models.Market_BOYModels());
         }
        </table>
    </div>
</td>
<td style="padding-left:.5em;vertical-align:top;">
    <div class="grid-wrap">
        <table id ="_PCVSPYView" class="table table-striped grid-table" style="min-width:500px;">
        @{            
            Html.RenderPartial("~/Views/Market_PCVSPY/_Market_PCVSPY.cshtml", new StrawmanApp.Models.Market_PCVSPYModels());
         }
        </table>
    </div>
</td>
</tr></table>